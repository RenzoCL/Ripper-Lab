<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="css/estilo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root{ --bg:#0b0b0b; --card:rgba(12,12,12,0.75); --accent:#e50914; --muted:#bdbdbd }
        html,body{ height:100vh; margin:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(180deg,#020202 0%, #0b0b0b 60%); color:#fff; overflow:hidden }
        .login-wrapper{ min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:32px; background-image: radial-gradient(ellipse at top left, rgba(230,9,20,0.05), transparent 10%); }
        .login-box{ width:380px; background:var(--card); border-radius:14px; padding:28px 26px; box-shadow: 0 20px 50px rgba(0,0,0,0.7); border:1px solid rgba(255,255,255,0.03); backdrop-filter: blur(6px); }
        .login-box h1{ margin:0; font-size:2.6rem; letter-spacing:3px; color:var(--accent); font-weight:800; text-transform:uppercase; }
        .login-box p.subtitle{ color:var(--muted); margin:8px 0 18px; font-size:0.95rem }
        .input-group{ margin-bottom:12px }
        .input-group label{ display:block; font-size:0.8rem; color:#ddd; margin-bottom:6px }
        .login-input{ width:100%; padding:12px 14px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:rgba(0,0,0,0.35); color:#fff; outline:none }
        .login-input:focus{ box-shadow:0 0 12px rgba(229,9,20,0.12); border-color:rgba(229,9,20,0.6) }
        .btn-login{ width:100%; padding:12px; background:var(--accent); border:none; color:#fff; border-radius:8px; font-weight:800; cursor:pointer; margin-top:10px }
        .btn-login:hover{ filter:brightness(0.95) }
        .whatsapp-section{ margin-top:16px; display:flex; flex-direction:column; gap:8px; align-items:center; text-align:center }
        .whatsapp-text{ color:var(--muted); font-size:0.95rem; max-width:320px }
        .btn-whatsapp{ background:#25D366; color:#fff; padding:8px 14px; border-radius:20px; text-decoration:none; font-weight:700; white-space:nowrap }
        .error-text{ display:none; margin-bottom:10px; background:rgba(255,77,77,0.08); color:#ffb3b3; padding:8px; border-radius:6px }
        footer{ text-align:center; margin-top:18px; color:#888; font-size:0.85rem }
        @media(max-width:420px){ body{ overflow:auto } .login-box{ width:100%; padding:20px } .login-box h1{ font-size:2rem } }
    </style>
</head>
<body>

    <div class="login-wrapper">
        <div class="login-box">
            <h1>RIPPER</h1>
            <p class="subtitle">Partituras, audios de canciones y más</p>
            
            <div id="error-msg" class="error-text"></div>

            <div class="input-group">
                <label>Correo electrónico</label>
                <input type="email" id="email" placeholder="ejemplo@correo.com" class="login-input">
            </div>

            <div class="input-group">
                <label>Contraseña</label>
                <input type="password" id="password" placeholder="••••••••" class="login-input">
            </div>
            
            <button id="btnLogin" class="btn-login">ENTRAR</button>
            
            <div class="whatsapp-section">
                <p class="whatsapp-text">¿No tienes cuenta? Contáctame por WhatsApp</p>
                <a href="https://wa.me/51933287274" target="_blank" class="btn-whatsapp">
                    <i class="fab fa-whatsapp"></i> Haz clic aquí
                </a>
            </div>
        </div>

        <footer>
            HECHO POR <span style="color: #666;">RENZO CHAVARRIA</span>
        </footer>
    </div>

    <script type="module">
        import { auth } from "./firebase.js";
        import { signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const btnLogin = document.getElementById("btnLogin");
        const errorMsg = document.getElementById("error-msg");

        onAuthStateChanged(auth, (user) => {
            if (user) { window.location.replace("home.html"); }
        });

        btnLogin.onclick = async () => {
            const email = document.getElementById("email").value;
            const pass = document.getElementById("password").value;

            if(!email || !pass) return;

            btnLogin.innerText = "VERIFICANDO...";
            errorMsg.style.display = "none";

            try {
                await signInWithEmailAndPassword(auth, email, pass);
            } catch (error) {
                btnLogin.innerText = "ENTRAR";
                errorMsg.style.display = "block";
                errorMsg.innerText = "Acceso denegado. Verifica tus datos.";
            }
        };
    </script>
</body>
</html>
