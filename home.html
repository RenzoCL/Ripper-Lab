<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <link rel="stylesheet" href="css/estilo.css">

    <style>
        /* El contenedor que manda a todos */
        .nav-buttons {
            display: flex;
            align-items: center; /* Esto alinea los centros de los botones */
            gap: 8px;
            height: 100%;       /* Para que ocupe todo el alto del nav */
        }

        /* Tu bot√≥n de Admin (es un <a>) */
        .btn-admin-link {
            display: flex;         /* Cambiado a flex para centrar el texto adentro */
            align-items: center;   /* Centra el texto verticalmente */
            justify-content: center;
            background: #1a1a1a; 
            color: #fff;
            height: 34px;          /* Altura fija exacta */
            padding: 0 15px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.75rem;
            border: 1px solid #444;
            box-sizing: border-box;
            margin: 0;             /* Eliminamos cualquier margen residual */
        }

        /* Tu bot√≥n de Logout (es un <button>) */
        /* Aseg√∫rate de que tenga la misma altura que el de admin */
        .btn-logout {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 34px;          /* ¬°IMPORTANTE! Misma altura que el admin */
            padding: 0 15px;
            font-size: 0.75rem;
            margin: 0;
            box-sizing: border-box;
            cursor: pointer;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;          /* Altura fija del header */
            padding: 0 20px;
            background: #1a1a1a;      /* O tu color de fondo */
            border-bottom: 1px solid #1a1a1a;
        }
    </style>
</head>
<body>
    <div id="home-wrapper">
        <header class="site-header">
            <div class="header-inner">
                <div class="logo">RIPPER</div>
                <div class="header-actions">
                    <button id="btnLogOut" class="btn-nav btn-logout">Cerrar Sesi√≥n</button>
                </div>
            </div>
        </header>

        <section class="hero">
            <div class="hero-content">
                <div class="hero-left">
                    <h1>Huaynos (Estilo Huaraz)</h1>
                    <p>Escucha los huaynos mientras miras la partitura.</p>
                    <div class="hero-ctas">
                        <a class="play-btn" href="lista-temas.html?cat=huayno">Explorar</a>
                    </div>
                </div>
            </div>
        </section>

        <main class="site-main">
            <h2 class="row-title" style="margin-top:0;">Recomendados para ti</h2>
            <section class="row">
                
                <div class="carousel">
                    <button class="carousel-btn prev" aria-label="Anterior">‚óÄ</button>
                    <div class="row-cards" data-carousel>
                        <div class="card">
                            <div class="poster"><img src="imagenes/huayno.webp" alt="Huayno (Estilo Huaraz)"></div>
                            <div class="card-meta"><h4>Huayno (Estilo Huaraz)</h4></div>
                        </div>
                        <div class="card">
                            <div class="poster" style="background:linear-gradient(135deg,#3a3a3a,#1f1f1f)"></div>
                            <div class="card-meta"><h4>M√©todos</h4></div>
                        </div>
                        <div class="card">
                            <div class="poster" style="background:linear-gradient(135deg,#2b2b40,#1a1a2a)"></div>
                            <div class="card-meta"><h4>Cumbias</h4></div>
                        </div>
                        <div class="card">
                            <div class="poster" style="background:linear-gradient(135deg,#36221f,#121212)"></div>
                            <div class="card-meta"><h4>Marineras</h4></div>
                        </div>
                        <div class="card">
                            <div class="poster" style="background:linear-gradient(135deg,#1f2b3a,#0c0f12)"></div>
                            <div class="card-meta"><h4>Bolo</h4></div>
                        </div>
                    </div>
                    <button class="carousel-btn next" aria-label="Siguiente">‚ñ∂</button>

                    <div class="scroll-fade left"></div>
                    <div class="scroll-fade right"></div>
                </div>
            </section>

            <section class="row">
                <h3 class="row-title">Nuevos</h3>
                <div class="carousel">
                    <button class="carousel-btn prev" aria-label="Anterior">‚óÄ</button>
                    <div class="row-cards" data-carousel>
                        <div class="card"><div class="poster" style="background:linear-gradient(135deg,#252525,#141414)"></div><div class="card-meta"><h4>Nuevo 01</h4></div></div>
                        <div class="card"><div class="poster" style="background:linear-gradient(135deg,#2a1f2a,#0f0f10)"></div><div class="card-meta"><h4>Nuevo 02</h4></div></div>
                        <div class="card"><div class="poster" style="background:linear-gradient(135deg,#102a2a,#071212)"></div><div class="card-meta"><h4>Nuevo 03</h4></div></div>
                    </div>
                    <button class="carousel-btn next" aria-label="Siguiente">‚ñ∂</button>
                    <div class="scroll-fade left"></div>
                    <div class="scroll-fade right"></div>
                </div>
            </section>

            <section class="row">
                <h3 class="row-title">Populares</h3>
                <div class="carousel">
                    <button class="carousel-btn prev" aria-label="Anterior">‚óÄ</button>
                    <div class="row-cards" data-carousel>
                        <div class="card"><div class="poster" style="background:linear-gradient(135deg,#2b1b1b,#0d0d0d)"></div><div class="card-meta"><h4>Popular 01</h4></div></div>
                        <div class="card"><div class="poster" style="background:linear-gradient(135deg,#1b2b1b,#081008)"></div><div class="card-meta"><h4>Popular 02</h4></div></div>
                        <div class="card"><div class="poster" style="background:linear-gradient(135deg,#251e31,#05050a)"></div><div class="card-meta"><h4>Popular 03</h4></div></div>
                    </div>
                    <button class="carousel-btn next" aria-label="Siguiente">‚ñ∂</button>
                    <div class="scroll-fade left"></div>
                    <div class="scroll-fade right"></div>
                </div>
            </section>
        </main>
    </div>

    <script type="module">
        import { auth, db } from "./firebase.js";
        import { vigilarSesion, globalLogout } from "./js/seguridad.js";
        // Importamos la funci√≥n necesaria para detectar el cambio de usuario
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // 1. Vigilancia activa en el Home
        vigilarSesion(auth, db, "home-wrapper");

        // 2. L√≥gica para mostrar el bot√≥n de Admin (Solo para ti)
        const ADMIN_EMAIL = "admin@ripper.com"; // üëà REEMPLAZA CON TU CORREO
        const adminZone = document.getElementById("admin-zone");

        onAuthStateChanged(auth, (user) => {
            if (user && user.email === ADMIN_EMAIL) {
                if (adminZone) {
                    // Sin espacios ni saltos de l√≠nea antes o despu√©s de la etiqueta <a>
                    adminZone.innerHTML = `<a href="admin.html" class="btn-admin-link">‚öôÔ∏è Panel Administrador</a>`;
                    // Forzamos que el span no tenga margen propio
                    adminZone.style.display = "flex";
                    adminZone.style.alignItems = "center";
                }
            }
        });

        // 3. Bot√≥n de Cerrar Sesi√≥n
        document.getElementById("btnLogOut").onclick = () => globalLogout(auth);
    </script>
    <script>
        // Carrusel: prev/next para el primer row-cards
        (function(){
            const carousels = document.querySelectorAll('[data-carousel]');
            carousels.forEach((row)=>{
                const wrapper = row.closest('.carousel');
                if(!wrapper) return;
                const prev = wrapper.querySelector('.carousel-btn.prev');
                const next = wrapper.querySelector('.carousel-btn.next');
                const card = row.querySelector('.card');
                function scrollBy(direction){
                    const gap = parseInt(getComputedStyle(row).gap) || 12;
                    const cardWidth = card ? card.getBoundingClientRect().width + gap : 360;
                    row.scrollBy({ left: cardWidth * direction, behavior: 'smooth' });
                }
                if(prev) prev.addEventListener('click', ()=> scrollBy(-1));
                if(next) next.addEventListener('click', ()=> scrollBy(1));
            });
        })();
    </script>
</body>
</html>
